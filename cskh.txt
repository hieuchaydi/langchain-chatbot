còn chức năng mà khi cần chăm sóc khách hàng thì điều hướng đến thì xử lý saoTuyệt vời đại ca!
Giờ bot đã quá ngon rồi, thêm đúng 1 chức năng “chăm sóc khách hàng” nữa là thành bot doanh nghiệp toàn diện 2025 luôn.
Mục tiêu:
Khi khách hỏi về:

Đặt hàng, giao hàng, đổi trả, bảo hành
Giá sản phẩm, khuyến mãi, thanh toán
Khiếu nại, hỗ trợ kỹ thuật…
→ Bot tự động phát hiện → trả lời:
“Để em chuyển ngay cho bạn CSKH chuyên trách xử lý giúp anh/chị nhé? Trong giây lát sẽ có bạn hỗ trợ ạ!”
→ (tùy chọn) gửi thông báo cáo vào Telegram/Slack/Email cho team CSKH

Cách làm siêu đơn giản – chỉ thêm đúng 15 dòng vào main.py
Python# Thêm vào đầu file main.py (cùng chỗ import)
import httpx   # để gửi thông báo Telegram/Slack nếu muốn

# ====================== HÀM PHÁT HIỆN Ý ĐỊNH CSKH ======================
def is_customer_support_intent(message: str) -> bool:
    """Dùng Gemini phát hiện có phải khách cần hỗ trợ mua hàng/khiếu nại không"""
    prompt = f"""Chỉ trả lời đúng 1 chữ: Y hoặc N

Câu này có phải khách hàng đang hỏi về:
- đặt hàng, giao hàng, đổi trả, bảo hành
- giá tiền, khuyến mãi, thanh toán, hóa đơn
- sản phẩm hỏng, lỗi, khiếu nại, hỗ trợ kỹ thuật
- cần gặp người thật

không?

Câu hỏi: {message}

Trả lời ngay 1 chữ:"""

    try:
        response = model.generate_content(prompt, generation_config={"temperature": 0, "max_output_tokens": 3})
        return response.text.strip().upper() == "Y"
    except:
        return False


# Tùy chọn: gửi thông báo cho team CSKH (Telegram hoặc Slack)
async def notify_cskh(message: str, customer_name: str = "Khách vãng lai"):
    # Thay bằng bot Telegram của team hoặc webhook Slack
    TELEGRAM_BOT_TOKEN = "123456789:ABCDEF..."   # để trống nếu không dùng
    TELEGRAM_CHAT_ID = "-1001234567890"

    if TELEGRAM_BOT_TOKEN:
        text = f"CSKH CẦN XỬ LÝ\nKhách: {customer_name}\nCâu hỏi: {message}"
        url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
        async with httpx.AsyncClient() as client:
            await client.post(url, json={"chat_id": TELEGRAM_CHAT_ID, "text": text})
Sửa đoạn /chat – thêm ngay sau phần chào hỏi:
Python@app.post("/chat")
async def chat(message: str = Form(...)):
    save_message("user", message)

    # 1. Chửi thề
    if contains_swear(message):
        resp = get_swear_response()
        save_message("bot", resp)
        return {"response": resp}

    # 2. Chào hỏi / cảm ơn
    if is_greeting_or_thanks(message):
        resp = get_quick_response()
        save_message("bot", resp)
        return {"response": resp}

    # 3. PHÁT HIỆN KHÁCH CẦN CSKH → CHUYỂN NGAY!
    if is_customer_support_intent(message):
        response = "Dạ vâng ạ! Để em chuyển ngay cho bạn Chăm sóc khách hàng chuyên trách hỗ trợ anh/chị trong giây lát nhé \nBạn vui lòng đợi chút xíu, sẽ có bạn vào hỗ trợ liền ạ!"
        save_message("bot", response)
        # Gửi thông báo cho team (tùy chọn)
        import asyncio
        asyncio.create_task(notify_cskh(message))
        return {"response": response}

    # 4. Câu hỏi kỹ thuật/tài liệu → đi RAG như cũ
    if not is_serious_question(message):
        resp = get_quick_response()
        save_message("bot", resp)
        return {"response": resp}

    # ... (phần RAG còn lại giữ nguyên)
Ví dụ thực tế hoạt động:





























Khách hỏiBot trả lờiGiao hàng bao lâu vậy ad?Dạ vâng ạ! Để em chuyển ngay cho bạn CSKH…Sản phẩm em mua bị lỗi rồi làm sao đổi?Dạ vâng ạ! Để em chuyển ngay cho bạn Chăm sóc khách hàng…Giá cái này bao nhiêu tiền vậy anhDạ vâng ạ! Để em chuyển ngay cho bạn CSKH…Chunk là gì vậy anh?(đi RAG bình thường) → trả lời về chunk, heading, v.v.Chào em yêuYêu đại ca 3000 luôn á
Bonus nâng cao (nếu đại ca muốn):

Thêm nút “Gọi CSKH” trên giao diện chat
Tự động tag khách trong Telegram: “Khách VIP – cần hỗ trợ gấp”
Kết nối Zalo OA / Facebook Messenger → chuyển tin nhắn thật

Đại ca chỉ cần copy 3 đoạn code trên vào main.py là xong — bot giờ vừa thông minh kỹ thuật, vừa biết điều hướng CSKH chuẩn doanh nghiệp luôn!
Muốn em gửi luôn file main.py hoàn chỉnh có đầy đủ chức năng CSKH không?
Hay đại ca tự thêm cho vui? Em chờ lệnh!